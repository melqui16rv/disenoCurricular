<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba Filtro de Completitud</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .filter-container { background: #f5f5f5; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        select, input, button { margin: 5px; padding: 8px; }
        .resultado { background: #e8f5e8; padding: 10px; margin: 10px 0; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>Prueba del Filtro de Estado de Completitud</h1>
    
    <div class="filter-container">
        <h3>Filtros disponibles para la acci√≥n 'listar':</h3>
        <form id="filtrosForm">
            <label for="busqueda">B√∫squeda general:</label>
            <input type="text" id="busqueda" name="busqueda" placeholder="C√≥digo, programa, red...">
            
            <label for="red_tecnologica">Red Tecnol√≥gica:</label>
            <input type="text" id="red_tecnologica" name="red_tecnologica" placeholder="Red tecnol√≥gica">
            
            <label for="nivel_academico">Nivel Acad√©mico:</label>
            <input type="text" id="nivel_academico" name="nivel_academico" placeholder="Nivel acad√©mico">
            
            <label for="estado_completitud"><strong>Estado de Completitud:</strong></label>
            <select id="estado_completitud" name="estado_completitud">
                <option value="">Todos los registros</option>
                <option value="completo">Solo con informaci√≥n completa</option>
                <option value="incompleto">Solo con informaci√≥n incompleta</option>
            </select>
            
            <br><br>
            <button type="button" onclick="aplicarFiltros()">Aplicar Filtros</button>
            <button type="button" onclick="limpiarFiltros()">Limpiar Filtros</button>
        </form>
    </div>
    
    <div id="resultados">
        <p>Selecciona un filtro y haz clic en "Aplicar Filtros" para ver los resultados.</p>
    </div>
    
    <script>
        function aplicarFiltros() {
            const formData = new FormData(document.getElementById('filtrosForm'));
            const params = new URLSearchParams();
            
            // Construir par√°metros de URL
            for (let [key, value] of formData.entries()) {
                if (value.trim() !== '') {
                    params.append(key, value);
                }
            }
            
            // Simular la URL que se generar√≠a
            const baseUrl = 'index.php?accion=listar';
            const urlCompleta = baseUrl + (params.toString() ? '&' + params.toString() : '');
            
            // Mostrar resultado simulado
            let resultado = `<div class="resultado">
                <h3>URL generada para la acci√≥n 'listar':</h3>
                <code>${urlCompleta}</code>
                
                <h4>Par√°metros que se enviar√≠an:</h4>
                <ul>`;
            
            for (let [key, value] of params.entries()) {
                resultado += `<li><strong>${key}:</strong> ${value}</li>`;
            }
            
            if (params.toString() === '') {
                resultado += '<li><em>Sin filtros aplicados - mostrar√° todos los registros</em></li>';
            }
            
            resultado += `</ul>
                
                <h4>Comportamiento esperado:</h4>`;
            
            const estadoCompletitud = params.get('estado_completitud');
            if (estadoCompletitud === 'completo') {
                resultado += `<p>‚úÖ Mostrar√° <strong>solo</strong> los dise√±os que tengan informaci√≥n completa</p>`;
            } else if (estadoCompletitud === 'incompleto') {
                resultado += `<p>‚ùå Mostrar√° <strong>solo</strong> los dise√±os que a√∫n necesiten completar informaci√≥n</p>`;
            } else {
                resultado += `<p>üìã Mostrar√° <strong>todos</strong> los dise√±os sin filtrar por completitud</p>`;
            }
            
            resultado += `<p><strong>üîí Importante:</strong> Este filtro NO redirigir√° a 'completar_informacion', permanecer√° en la vista 'listar'</p>
            </div>`;
            
            document.getElementById('resultados').innerHTML = resultado;
        }
        
        function limpiarFiltros() {
            document.getElementById('filtrosForm').reset();
            document.getElementById('resultados').innerHTML = '<p>Filtros limpiados. Selecciona un filtro y haz clic en "Aplicar Filtros" para ver los resultados.</p>';
        }
        
        // Ejemplo autom√°tico al cargar
        document.addEventListener('DOMContentLoaded', function() {
            // Simular selecci√≥n del filtro de incompletos
            document.getElementById('estado_completitud').value = 'incompleto';
            document.getElementById('busqueda').value = 'sistemas';
            
            setTimeout(() => {
                aplicarFiltros();
                alert('Ejemplo cargado: Filtro por "sistemas" + "informaci√≥n incompleta"');
            }, 500);
        });
    </script>
</body>
</html>
